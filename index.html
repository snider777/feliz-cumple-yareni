<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Feliz cumple Yareni ðŸŽ‰</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/addons/p5.sound.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
    }
  </style>
</head>
<body>
  <script>
    let texts = [];
    let particles = [];
    let colors = ['#FF0000', '#FF00FF', '#FF66B2'];
    let explosionSound;

    function preload() {
      explosionSound = loadSound('explosion.mp3');
    }

    function setup() {
      createCanvas(windowWidth, windowHeight);
      textFont('Arial');
      textSize(32);
      textAlign(CENTER, CENTER);
      for (let i = 0; i < 50; i++) {
        texts.push(new FallingText());
      }
    }

    function draw() {
      background(0);
      for (let t of texts) {
        t.update();
        t.show();
      }

      for (let i = particles.length - 1; i >= 0; i--) {
        particles[i].update();
        particles[i].show();
        if (particles[i].life <= 0) {
          particles.splice(i, 1);
        }
      }
    }

    function mousePressed() {
      explosionSound.play();
      for (let i = 0; i < 100; i++) {
        particles.push(new Particle(mouseX, mouseY));
      }

      for (let t of texts) {
        let d = dist(mouseX, mouseY, t.x, t.y);
        if (d < 100) {
          t.reset();
        }
      }
    }

    class FallingText {
      constructor() {
        this.reset();
      }

      reset() {
        this.x = random(width);
        this.y = random(-200, -50);
        this.speed = random(1, 4);
        this.color = random(colors);
      }

      update() {
        this.y += this.speed;
        if (this.y > height + 50) {
          this.reset();
        }
      }

      show() {
        fill(this.color);
        text("Feliz cumple Yareni :D", this.x, this.y);
      }
    }

    class Particle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        let angle = random(TWO_PI);
        let speed = random(2, 7);
        this.vx = cos(angle) * speed;
        this.vy = sin(angle) * speed;
        this.life = 60;
        this.color = random(colors);
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.2; // gravedad
        this.life--;
      }

      show() {
        noStroke();
        fill(this.color);
        ellipse(this.x, this.y, 5);
      }
    }
  </script>
</body>
</html>
